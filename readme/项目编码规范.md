>#编码规范

2017/12/23 16:37:05 

|  文件状态 |  文件标识  |  编码规范  |
    |---------|---------|--
    |[ ] 草稿 | 当前版本： |1.0
    | [ ] 正式发布| 作    者： |吴文斌 殷占伟 张明佳
    |[√] 正在修改| 完成日期： |2017-12-23
>#序论
	
###适用范围
本文档提供的代码规则和文档指南不仅适用于本小组项目《美食俘虏》，也适用于其他的PHP项目，意在帮助新手在编程风格上养成良好的习惯，也可以作为部分软件公司中项目团队的参考文档，根据自己公司团队的特点进行部分修改。
###目标
* 能够遵守公共一致的编码标准对任何开发项目都很重要，特别是在多人的开发团队中，编码标准能帮助确保代码的质量、减少Bug和容易维护。目标如下：
* 新人可以很快的适应环境，方便的融入到项目团队中
在一致的环境下，团队协作中有更高的效率，团队的成员可以减少犯错的机会
* 程序员可以方便的了解其他人的代码，弄清程序的状况，就和看自已的代码一样
* 防止接触PHP的新人自创一套风格并养成终生的习惯，一次次的犯同样的错误
###开发工具
* 编辑器：Sublime Text3
* IDE集成器：JetBrains PhpStorm 2017.2.2
>#二期项目-编码规范
###PHP开始和结束标记
* 所有PHP代码，使用<?php ?>标记来界定PHP代码
* 如果PHP代码中是纯PHP代码，则以 <?php  开头，没有结束标签
###PHP代码编码格式
* 源文件中PHP代码的编码格式必须使用UTF-8无BOM格式
###临时性代码注释
* 在程序开发中难免留下一些临时代码和调试代码，以免日后遗忘，此类代码必须添加注释。所有临时性、调试性、试验性的代码，都可以添加统一的注释标记,例如“//debug”并后跟完整的注释信息，这样可以方便在程序发布和最终调试前批量检查程序中是否还存在有疑问的代码。
#
	//debug 这里不能确定是否需要赋值
	$flag = $_GET[“page”];
###单引号的使用
* 关联数组的下标数组中，如果下标不是整型，而是字符串类型，请务必用单引号将下标括起，正确的写法为$array[‘key’]，而不是$array[key]，因为不正确的写法会使PHP解析器认为key是一个常量，进而先判断常量是否存在，不存在时才以“key”作为下标带入表达式中，同时出发错误事件，产生一条Notice级错误。
#
	$array[‘key’]；
* 数据库SQL语句中，所有数据必须加单引号，无论数值还是字串，以避免可能的注入漏洞和SQL错误。
#
	UPDATE users SET name=’admin’, age=’22’, height=’178.5’ where id=’1’
###变量名

* 变量也应具有描述性，杜绝一切拼音、或拼音英文混杂的命名方式
* 变量包含数字、字母和下划线字符，不允许使用其他字符，变量命名最好使用项目中有据可查的英文缩写方式， 尽可以要使用一目了然容易理解的形式
* 变量以字母开头，如果变量包含多个单词，首字母大写，当包含多个单词时，后面的每个单词的首字母大写
#
	例如: $AaaBbbCcc  (如果变量名由aaa, bbb, ccc三个单词组成的)
* 可以合理的对过长的命名进行缩写，例如$bio($biography)，$tpp($threadsPerPage)，前提是英文中有这样既有的缩写形式，或字母符合英文缩写规范
* 变量除了在循环体(for，foreach，while)中，其他位置允许但不鼓励使用没有描述意义的字母作为变量名。例如：$i,$j
###常量名
* 常量名应具有描述性，杜绝一切拼音、或拼音英文混杂的命名方式
* 常量名包含字母字符和下划线，不允许使用数字和其他字符
* 常量名所有字母必须大写
###数组声明
* 数字索引数组索引不能为负数，如果不存在定义索引，建议索引以0开始
* 如果使用key/value的形式进行关联数组声明的话，鼓励把数组分成多行，提高可读性
#
	array(
	‘one_key’=>’one_value’, 
	‘two_key’=>’two_value’, 
	‘three_key’=>’three_value’ 
	);
### if/else/else if
* if结构中，前花括号必须和条件语句在同一行，后花括号单独在最后一行，其中内容使用缩进。else和else if与前后两个大括号同行。另外，即便if后只有一行语句，仍然需要加入大括号，以保证结构清晰
* 首括号与关键词同行，尾括号与关键字同列;
* 允许但强烈不鼓励elseif写法，鼓励使用else if的写法
# 
	if ($one == ‘1’) {

	} else if ($one == ‘2’) {

	} 
* 在条件语句中存在多个运算符的时候，使用括号强制说明优先级，避免开发人员因为运算符优先级概念混乱造成的逻辑错误
# 
	$one = $two == 1 || $two == 2 && $three > 3;        //错误的
	$one = (($two == 1) || ($two == 2 && $three > 3)); //正确的
###类的声明
* 开始的左大括号与类的定义为同一行，不要另起一行
* 类文件都是以.class.php为后缀，而且类名(className) 必须使用驼峰命名法(StudlyCaps)写法 (即每个词首字母大写)
* 类(class)中的常量必须只由大写字母和下划线(_)组成
* 类中的代码必须使用缩进
* 每个PHP文件中只有一个类,在文件名中包含类名 ，例如“类名.class.php”
* 不建议将其他代码放到类文件里
# 
	/**
	* Documentation Block Here
	*/
	class SampleClass
	{
    //类的所有内容
	}
###错误报告级别
* 在软件开发和调试阶段，请在全局文件中使用error_reporting(E_ALL)，作为默认的错误报告级别，此级别最为严格，能够报告程序中所有的错误、警告和提示信息，以帮助开发者检查和核对代码，避免大多数安全性问题和逻辑错误、拼写错误
* 在软件发布时，请使用error_reporting(E_ERROR | E_WARNING | E_PARSE)，作为默认的错误报告级别，以利于用户使用并将无谓错误提示信息降至最低
###数据库表名
* 表名应具有描述性，杜绝一切拼音、或拼音英文混杂的命名方式
* 表名允许使用字母，数字和下划线，不允许使用其他字符。表名使用单词开头，不允许使用数字和下划线开头
* 表名一律有统一前缀，前缀与表名之间以下划线连接。使用前缀可以让同一个项目在一个库中安装多个
* 表名单词一律小写，单词之间使用下划线连接
* 表名长度不能超过64个字符
* 表名要回避MySQL的保留字
###ThinkPHP5.0框架规范
* 确保文件的命名和调用大小写一致，并且类名和文件名也要保持一致
* 方法的命名使用驼峰法，并且首字母小写或者使用下划线“_”，例如 getUserName，_parseType，通常下划线开头的方法属于私有方法
* 属性的命名使用驼峰法，并且首字母小写或者使用下划线“_”，例如 tableName、_instance，通常下划线开头的属性属于私有属性
* 确保文件的命名和调用大小写一致
###SQL语句设计
* 数据表和字段采用小写加下划线方式命名，并注意字段名不要以下划线开头
* 所有SQL语句中，除了表名、字段名称以外，全部语句和函数均需大写，应当杜绝小写方式或大小写混杂的写法
#
	例如select * from xs_users;是不符合规范的写法
* 字段列表不要使用“*”, 需要查询的字段就在字段列表中给出,同样插入数据时也要给出字段列表。这样不仅可以提高查询效率，也可以得到自己想要的字段列表顺序
#
	例如：SELECT name,age,sex FROM users;
* 在使用字段值时，不管什么类型的数据，都要使用单引起来
# 
	例如：INSERT INTO users(name, age, sex) VALUES(‘admin’, ‘10’, ‘男’);
* 通常情况下，在对多表进行操作时，要根据不同表名称，对每个表指定一个1~2个字母的缩写，以利于语句简洁和可读性
#
	$query = $db->query("SELECT s.*, u.*
	FROM {$tablepre}sessions s, {$tablepre}users u
	WHERE u.uid=s.uid AND s.sid='$sid');