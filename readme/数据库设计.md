>#数据库设计说明书

2017/12/24 17:30:30 
###项目名称：美食的俘虏
###组员：吴文斌 殷占伟 张明佳
>版本信息

	|  文件状态 |  文件标识  |  编码规范  |
    |---------|---------|--
    |[ ] 草稿 | 当前版本： |1.0
    | [ ] 正式发布| 作    者： |吴文斌 殷占伟 张明佳
    |[√] 正在修改| 完成日期： |2017-12-23
>#开发技术

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在使用任何数据库之前，都必须设计好数据库，包括将要存储的数据的类型，数据之间的相互关系以及数据的组织形式。数据库设计是指对于一个给定的应用环境，构造最优的数据库模式，建立数据库及其应用系统，使之能够有效地存储数据。为了合理地组织和高效率地存取数据，目前最好的方式，就是建立数据库系统，因此在系统的总体设计阶段，数据库的建立与设计是一项十分重要的内容。由于数据库应用系统的复杂性，为了支持相关程序运行，数据库设计就变得异常复杂，因此最佳设计不可能一蹴而就，而只能是一种“反复探寻，逐步求精”的过程，也就是规划和结构化数据库中的数据对象以及这些数据对象之间关系的过程。
>#背景

	|  名称 |  说明  |
    |---------|---------|
    |数据库名称 | Toriko |
    |数据库系统| MySQL5.7 |
    |客户端连接工具| Navicat Premium |
	|项目开发者|吴文斌 殷占伟 张明佳
>#参考资料

* 《细说PHP教程》
* ThinkPHP5.0完全开发手册
* 本项目相关的其他参考资料
>#外部设计

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;外部设计是研究和考虑所要建立的数据库的信息环境，对数据库应用领域中各种信息要求和操作要求进行详细地分析，了解应用领域中数据项、数据项之间的关系和所有的数据操作的详细要求，了解哪些因素对响应时间、可用性和可靠性有较大的影响等各方面的因素。
>####标识符和状态

数据库表前缀：fd_<br>
用户名：root<br>
密码：123456<br>
权限：全部<br>
有效时间：开发阶段<br>
>####约定

* 所有命名一定要具有描述性，杜绝一切拼音、或拼音英文混杂的命名方式。<br>
* 字符集采用 UTF-8，请注意字符的转换。<br>
* 所有数据表第一个字段都是系统内部使用主键列，自增字段，不可空，名称为：id，确保不把此字段暴露给最终用户。<br>
* 除特别说明外，所有日期格式都采用int格式，无时间值。<br>
* 除特别说明外，所有字段默认都设置不充许为空， 需要设置默认值。<br>
* 所有普通索引的命名都是表名加设置索引的字段名组合，例如用户表User中name字段设置普通索引，则索引名称命名方式为user_name;
>####支持软件

* 操作系统： Linux / Windows
* 数据库系统：MySQL
* 查询浏览工具：Navicat Premium

注意：mysql命令行环境下对中文支持不好，可能无法书写带有中文的 SQL 语句
>####结构设计

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;数据库的结构设计中有许许多多需要考虑的因素，如数据库的背景、应用环境等方面都需要有深入的了解，只有一个对所有这些因素都很了解的数据库设计专家，他设计的数据库才能易于使用和维护，并且具有高效和一致的特征。虽然这样只对数据库设计过程有一个概要的了解，但是仍然有助于读者了解和掌握SQL，使读者可以很好地分析数据间的相互关系，在使用SQL进行报表的生成、子查询及视图等操作时，可以更好地进行操作。
>####设计数据表结构

----
>######用户表

	|  列名 |  数据类型  |  属性  | 约束条件 | 说明 |
    |---------|---------|--------|--------|----
    |id | int |primary key		|auto_increment 		|	主键		|
    | tel| char |not null| unique	| 电话	 |
    |pwd| char |not null|		|	密码  |
	|nickname | varchar |not null		|	|用户名	|
    | address| varchar ||	|	地址 |
    |icon| varchar |not null|		|	图片路径 |
	|sex| tinyint |not null|		|	性别  1-男  2-女 |
	|status| tiyint |not null|		|	状态  1-激活  2-禁用 |
	|regtime| int |not null|		|	注册时间 |
>######平台后台登录表

	|  列名 |  数据类型  |  属性  | 约束条件 | 说明 |
    |---------|---------|--------|--------|----
    |id | int |primary key		|auto_increment 		|	主键		|
    | name| varchar |not null| unique	| 管理账号	 |
    |pwd| char |not null|		|	密码  |
>######公司后台登录表

	|  列名 |  数据类型  |  属性  | 约束条件 | 说明 |
    |---------|---------|--------|--------|----
    |id | int |primary key		|auto_increment 		|	主键		|
    | name| varchar |not null| unique	| 管理员账号	 |
    |pwd| char |not null|		|	密码  |
>######订单order表

	|  列名 |  数据类型  |  属性  | 约束条件 | 说明 |
    |---------|---------|--------|--------|----
    |id | int |primary key		|auto_increment 		|	主键		|
    | orderNum| varchar |not null| unique	| 订单号	 |
    |uid| int |not null|		|	用户id |
	|shopName | varchar |not null		|	|店名	|
    | shopTel| char |not null|	|	商家电话|
    |shopAddress| varchar |not null|		|	店地址|
	|userTel| char |not null|		|	用户电话 |
	|status| tiyint |not null|		|	状态  1-正常 2-取消 |
>######商家公司信息表

	|  列名 |  数据类型  |  属性  | 约束条件 | 说明 |
    |---------|---------|--------|--------|----
    |id | int |primary key		|auto_increment 		|	主键		|
    | name| varchar |not null| unique	| 公司名	 |
    |tel| char |not null|	unique	|	电话|
	|email | varchar |not null		|unique	|邮箱	|
    | resid| int |not null|unique	|	店铺id|
    |address| varchar |not null|		|	公司地址|
>######店铺表

	|  列名 |  数据类型  |  属性  | 约束条件 | 说明 |
    |---------|---------|--------|--------|----
    |id | int |primary key		|auto_increment 		|	主键		|
    | name| varchar |not null| unique	| 店铺名 |
    |tel| char |not null|	unique	|	店铺电话|
    | datestime| datetime |not null|unique	|	营业时间|
	 | address| varchar |not null|	|	店铺地址|
>######店铺属性表

	|  列名 |  数据类型  |  属性  | 约束条件 | 说明 |
    |---------|---------|--------|--------|----
    |id | int |primary key		|auto_increment 		|	主键		|
    |resid| varchar |not null| unique	| 店铺id |
    |per| char ||	unique	|	人均消费|
>######分类表

	|  列名 |  数据类型  |  属性  | 约束条件 | 说明 |
    |---------|---------|--------|--------|----
    |id | int |primary key		|auto_increment 		|	主键		|
    | name| varchar || unique	| 分类名 |
    |pid| char |not null|		|	父级id|
    | path| datetime |not null|	|	分类路径|
	 | display| varchar ||	|	显示/隐藏  1-显示  2-隐藏|
>######菜单表

	|  列名 |  数据类型  |  属性  | 约束条件 | 说明 |
    |---------|---------|--------|--------|----
    |id | int |primary key		|auto_increment 		|	主键		|
    | resid| varchar |not null| unique	|店铺id|
    |name| varchar ||		|	菜名|
    | attr| varchar ||	|	菜的类型|
	 | price| int ||	|	价格|
>######店铺图片详情表

	|  列名 |  数据类型  |  属性  | 约束条件 | 说明 |
    |---------|---------|--------|--------|----
    |id | int |primary key		|auto_increment 		|	主键		|
    | resid| varchar |not null| unique	|店铺id|
    |picture| varchar ||		|	店铺环境图片|
    | introduction| varchar ||	|	简介|
	
>####完整性

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;数据库应用对数据一般都具有一定的限制，这种限制称为完整性。数据库的完整性是保证数据库正确的关键。广义上说，数据库完整性包括数据库中数据的准确性和一致性。理想情况下，数据库软件提供了检查数据完整性的各种方法，但遗憾的是，目前大多数关系数据库系统对数据库的完整性支持并不够充分。
关系数据库系统应该保证输入的值符合其规定的数据类型，并保证值在系统支持的范围内。不同的关系数据库系统可能提供了不同的数据类型，但所有的关系数据库系统都检查输入的值，并且拒绝不符合定义的数据类型的值或者不在系统支持范围内的值。例如，不希望将一个工作人员的生日输入为“1981.11.5”而将另一个工作人员的生日输入为“11/5/1981”。数据必须准确且在数据库中一致存储，这样才能从数据库中检索出正确的数据，才能在数据间作出正确比较。一般来说，关系数据库系统都支持3种完整性：<br>

* 域约束
*  实体完整性约束
* 关联完整性约束
>####数据库设计其他问题

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上面介绍了数据库设计的主要部分，这些可以帮助用户设计出基本符合要求的数据库，但是在数据库的设计中还有许多其他的问题需要考虑。

* 索引： 索引是数据库实现的重要组成部分，对于数据的检索、存储等有很大的影响。
* 安全性： 在数据库中安全性是一个非常重要的问题。必须保证数据库数据的安全性，特别是在Internet迅速发展的今天，有效地保障数据库数据的安全对用户来说是非常重要的。
* 数据字典： 数据字典用来存储数据库中存储的数据的描述信息和数据库管理系统需要的控制信息，数据字典与数据库管理软件密切相关。
* 物理数据库设计： 每个数据库管理系统都提供很多种存储结构和存储方法供数据库设计人员选择，物理数据库设计的好坏对数据库的性能有很大的影响。